---
title: "全局配置 OpenCode 自动生成博客 Slug：一劳永逸的解决方案"
slug: "global-config-opencode-auto-slug"
date: "2026-02-15"
excerpt: "详细记录如何配置 OpenCode，使其在生成技术博客时自动添加 slug 字段，避免中文文件名导致的 404 错误"
tags: ["OpenCode", "博客", "Slug", "配置", "自动化", "最佳实践"]
author: "cjf"
---

# 全局配置 OpenCode 自动生成博客 Slug：一劳永逸的解决方案

在解决了博客中文文章 404 错误的问题后，我发现了一个新问题：每次使用 \`/sb\` 命令生成技术博客时，都需要手动添加 slug 字段。这不仅麻烦，还容易遗漏。为了彻底解决这个问题，我决定对 OpenCode 进行全局配置，让 slug 字段自动生成。

## 问题背景

在之前的修复中，我们通过为每篇文章手动添加 slug 字段，解决了中文文件名导致的 404 错误。但这种方式存在明显缺陷：

1. **容易遗漏** - 每次生成博客都要记得手动添加 slug
2. **不一致** - 不同人写的 slug 格式可能不统一
3. **繁琐** - 需要重复操作，浪费时间

## 解决方案

通过在 OpenCode 的配置文件中修改 \`save-blog\` 和 \`sb\` 命令的模板，要求自动生成 slug 字段。

## 配置步骤

### 1. 找到配置文件

OpenCode 的全局配置文件位于：
\`\`\`
~/.config/opencode/opencode.json
\`\`\`

### 2. 修改 save-blog 和 sb 命令

找到 \`command\` 部分中的 \`save-blog\` 和 \`sb\` 配置，修改它们的 template：

**修改前：**
\`\`\`json
"save-blog": {
  "template": "@blog-writer 将本次技术对话整理为博客文档，保存到 C:/Users/14023/WebstormProjects/my-blog/content/blog 目录，默认作者为 cjf，必须包含 front matter（title, date, excerpt, tags, author）",
  "description": "📝 生成博客（免费）",
  "agent": "blog-writer"
},
"sb": {
  "template": "@blog-writer 将本次技术对话整理为博客文档，保存到 C:/Users/14023/WebstormProjects/my-blog/content/blog 目录，默认作者为 cjf，必须包含 front matter（title, date, excerpt, tags, author）",
  "description": "📝 快捷生成博客"
}
\`\`\`

**修改后：**
\`\`\`json
"save-blog": {
  "template": "@blog-writer 将本次技术对话整理为博客文档，保存到 C:/Users/14023/WebstormProjects/my-blog/content/blog 目录，默认作者为 cjf，必须包含 front matter（title, slug, date, excerpt, tags, author）。重要：slug 字段必须根据 title 自动生成，格式为小写字母和连字符",
  "description": "📝 生成博客（免费）",
  "agent": "blog-writer"
},
"sb": {
  "template": "@blog-writer 将本次技术对话整理为博客文档，保存到 C:/Users/14023/WebstormProjects/my-blog/content/blog 目录，默认作者为 cjf，必须包含 front matter（title, slug, date, excerpt, tags, author）。重要：slug 字段必须根据 title 自动生成，格式为小写字母和连字符",
  "description": "📝 快捷生成博客"
}
\`\`\`

### 3. 关键变化

- ✅ **添加了 slug 字段要求** - 从 \`(title, date, excerpt, tags, author)\` 变为 \`(title, slug, date, excerpt, tags, author)\`
- ✅ **明确要求自动生成** - 添加提示："slug 字段必须根据 title 自动生成，格式为小写字母和连字符"

## slug 生成规则

根据 title 自动生成 slug 时，遵循以下规则：

1. **小写字母** - 全部转为小写
2. **连字符分隔** - 单词之间用 \`-\` 连接
3. **去除特殊字符** - 移除标点、空格等特殊字符
4. **提取关键词** - 从 title 中提取核心关键词

### 示例

| Title | 生成的 Slug |
|-------|-------------|
| 全局配置 OpenCode 自动生成博客 Slug | \`global-config-opencode-auto-slug\` |
| 修复 Next.js 博客中文文章 404 错误 | \`fix-nextjs-blog-chinese-404\` |
| 如何学习 TypeScript | \`how-to-learn-typescript\` |

## 实际效果

配置完成后，使用 \`/sb\` 或 \`save-blog\` 命令时：

1. ✅ **自动包含 slug 字段** - 无需手动添加
2. ✅ **根据 title 生成** - 确保 slug 与内容相关
3. ✅ **格式统一** - 所有 slug 遵循相同的命名规范
4. ✅ **避免遗漏** - 不再担心忘记添加 slug

## 验证配置

修改配置后，执行以下命令测试：

\`\`\`bash
/sb
\`\`\`

检查生成的博客文件，确认 front matter 中包含 slug 字段：

\`\`\`yaml
---
title: "全局配置 OpenCode 自动生成博客 Slug：一劳永逸的解决方案"
slug: "global-config-opencode-auto-slug"
date: "2026-02-15"
excerpt: "..."
tags: [...]
author: "cjf"
---
\`\`\`

## 最佳实践总结

1. **全局配置优于手动操作** - 一次性配置，永久生效
2. **自动化减少人为错误** - 避免遗漏和格式不一致
3. **保持 slug 命名一致性** - 统一的生成规则
4. **slug 应该有意义** - 从 title 提取关键词，便于 SEO

## 注意事项

- 配置修改后立即生效，无需重启 OpenCode
- 如果 blog-writer 无法正确生成 slug，可以在 prompt 中提供更具体的示例
- 建议定期检查生成的博客，确保 slug 质量

## 总结

通过在 OpenCode 全局配置中添加 slug 字段要求，我们实现了一劳永逸的解决方案。现在每次生成技术博客时，slug 字段都会自动生成，无需手动干预，大大提高了工作效率，也避免了因遗漏 slug 导致的 404 错误。

**核心要点：**
- 修改 \`~/.config/opencode/opencode.json\`
- 在 template 中要求包含 slug 字段
- 明确要求根据 title 自动生成
- 使用小写字母和连字符格式
